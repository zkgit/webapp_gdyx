var $ = {
    init: function (b) {
        var a = {
            url: "",
            method: "get",
            data: {},
            success: function () {},
            complete: function () {},
            error: function (c) {},
            async: true
        };
        a.url = b.url;
        a.method = b.method || a.method;
        a.data = $.params(b.data) || $.params(a.data);
        b.async == false ? a.async = b.async : a.async = a.async;
        a.complete = b.complete || a.complete;
        a.success = b.success || a.success;
        a.error = b.error || a.error;
        return a
    },
    createXHR: function () {
        if (window.XMLHttpRequest) {
            return new XMLHttpRequest()
        } else {
            if (window.ActiveXObject) {
                var b = ["MSXML2.XMLHttp", "Microsoft.XMLHTTP"];
                for (var c = 0, a = b.length; c < a; c++) {
                    try {
                        return new ActiveXObject(version[c]);
                        break
                    } catch (d) {}
                }
            } else {
                throw new Error("浏览器不支持XHR对象！")
            }
        }
    },
    params: function (c) {
        var a = [];
        for (var b in c) {
            a.push(encodeURIComponent(b) + "=" + encodeURIComponent(c[b]))
        }
        return a.join("&")
    },
    callback: function (a, b) {
        if (b.status == 200) {
            a.success(b.responseText)
        } else {
            a.error()
        }
    },
    ajax: function (a) {
        if (a.method === "post") {
            $.post(a)
        } else {
            $.get(a)
        }
    },
    post: function (b) {
        var c = $.createXHR();
        var a = $.init(b);
        a.method = "post";
        if (a.async === true) {
            c.onreadystatechange = function () {
                if (c.readyState == 4) {
                    $.callback(a, c)
                }
            }
        }
        c.open(a.method, a.url, a.async);
        c.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        c.send(a.data);
        if (a.async === false) {
            $.callback(b, c)
        }
    },
    get: function (a, d, c,error) {
        var f = $.createXHR();
        var e = {};
        e.url = a;
        e.success = d;
        e.error=error;
        if (c == false) {
            e.async = c
        }
        var b = $.init(e);
        f.open(b.method, b.url, b.async);
        f.onreadystatechange = function () {
            if (f.readyState == 4) {
                $.callback(e, f)
            }
        };
        f.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        f.send(null)
    },
    ajaxSetup: function (a) {},
    each: function (b, c) {
        var a = 0;
        for (var a = 0; a < b.length; a++) {
            c(a, b[a])
        }
    }
};